2i.recovery_2i.SecondaryIndexingRecoveryTests:
#Reovery with the following before=create_index,in_between=drop_index,after=
# test with warm up
    test_warmup,nodes_init=5,nodes_in=1,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-kv-index-kv:index
# test with autofailover
    test_autofailover,nodes_init=5,nodes_out=1,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-kv:index,nodes_out_dist=kv:1
    test_autofailover,nodes_init=5,nodes_out=1,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-kv:index,nodes_out_dist=index:1
# test with rebalance-in
    test_rebalance_in,before=,in_between=create_index,after=query_ops:drop_index,groups=simple,dataset=default,doc-per-day=10,nodes_init=5,nodes_in=1,services_in=index,services_init=n1ql:kv-kv-kv-index-kv:index
    test_rebalance_in,before=,in_between=create_index,after=query_ops:drop_index,groups=simple,dataset=default,doc-per-day=10,nodes_init=5,nodes_in=1,services_in=index,services_init=n1ql:kv-kv-kv-index-kv:index
    test_rebalance_in,before=,in_between=create_index,after=query_ops:drop_index,groups=simple,dataset=default,doc-per-day=10,nodes_init=5,nodes_in=1,services_in=kv,services_init=n1ql:kv-kv-kv-index-kv:index
    test_rebalance_in,before=,in_between=create_index,after=query_ops:drop_index,groups=simple,dataset=default,doc-per-day=10,nodes_init=5,nodes_in=2,services_in=kv-kv,services_init=n1ql:kv-kv-kv-index-kv:index
    test_rebalance_in,before=,in_between=create_index,after=query_ops:drop_index,groups=simple,dataset=default,doc-per-day=10,nodes_init=5,nodes_in=2,services_in=kv-index,services_init=n1ql:kv-kv-kv-index-kv:index
    test_rebalance_in,before=,in_between=create_index,after=query_ops:drop_index,groups=simple,dataset=default,doc-per-day=10,nodes_init=5,nodes_in=1,services_in=kv:index,services_init=n1ql:kv-kv-kv-index-kv:index
    test_rebalance_in,before=,in_between=create_index,after=query_ops:drop_index,groups=simple,dataset=default,doc-per-day=10,nodes_init=5,nodes_in=1,services_in=n1ql,services_init=n1ql:kv-kv-kv-index-kv:index
# test with rebalance-out
    test_rebalance_out,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1,targetMaster=True
    test_rebalance_out,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1
    test_rebalance_out,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=index:1
    test_rebalance_out,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:1-index:1
    test_rebalance_out,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:2
    test_rebalance_out,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=n1ql:1
# test with rebalance-in-out-stop-start-rebalance
    test_rebalance_with_stop_start,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=6,nodes_in=1,nodes_out=1,services_in=kv,services_init=n1ql:kv-kv-kv-index-kv:index,services_in=kv:n1ql,nodes_out_dist=kv:1,targetMaster
    test_rebalance_with_stop_start,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=6,nodes_in=1,nodes_out=1,services_in=kv,services_init=n1ql:kv-kv-kv-index-kv:index,services_in=kv,nodes_out_dist=kv:1
    test_rebalance_with_stop_start,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=6,nodes_in=2,nodes_out=1,services_in=kv,services_init=n1ql:kv-kv-kv-index-kv:index,services_in=kv-kv,nodes_out_dist=kv:2
    test_rebalance_with_stop_start,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=6,nodes_in=1,nodes_out=1,services_in=kv,services_init=n1ql:kv-kv-kv-index-kv:index,services_in=kv,nodes_out_dist=index:1
    test_rebalance_with_stop_start,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=6,nodes_in=2,nodes_out=2,services_in=kv,services_init=n1ql:kv-kv-kv-index-kv:index,services_in=kv-kv,nodes_out_dist=index:2
    test_rebalance_with_stop_start,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=6,nodes_in=2,nodes_out=2,services_in=kv,services_init=n1ql:kv-kv-kv-index-kv:index,services_in=kv-index,nodes_out_dist=index:1-kv:1
    test_rebalance_with_stop_start,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=8,nodes_in=1,nodes_out=3,services_in=kv,services_init=n1ql:kv-kv-kv-kv-index-index-index-index,services_in=kv,nodes_out_dist=kv:3
# test with rebalance-in-out
    test_rebalance_in_out,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=6,nodes_in=1,nodes_out=1,services_in=kv,services_init=n1ql:kv-kv-kv-index-kv:index,services_in=kv:n1ql,nodes_out_dist=kv:1,targetMaster
    test_rebalance_in_out,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=6,nodes_in=1,nodes_out=1,services_in=kv,services_init=n1ql:kv-kv-kv-index-kv:index,services_in=kv,nodes_out_dist=kv:1
    test_rebalance_in_out,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=6,nodes_in=2,nodes_out=1,services_in=kv,services_init=n1ql:kv-kv-kv-index-kv:index,services_in=kv-kv,nodes_out_dist=kv:2
    test_rebalance_in_out,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=6,nodes_in=1,nodes_out=1,services_in=kv,services_init=n1ql:kv-kv-kv-index-kv:index,services_in=kv,nodes_out_dist=index:1
    test_rebalance_in_out,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=6,nodes_in=2,nodes_out=2,services_in=kv,services_init=n1ql:kv-kv-kv-index-kv:index,services_in=kv-kv,nodes_out_dist=index:2
    test_rebalance_in_out,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=6,nodes_in=2,nodes_out=2,services_in=kv,services_init=n1ql:kv-kv-kv-index-kv:index,services_in=kv-index,nodes_out_dist=index:1-kv:1
    test_rebalance_in_out,before=create_index,in_between=drop_index,after=,groups=composite,dataset=default,doc-per-day=10,nodes_init=8,nodes_in=1,nodes_out=3,services_in=kv,services_init=n1ql:kv-kv-kv-kv-index-index-index-index,services_in=kv,nodes_out_dist=kv:3
# test with server crash by killing memcached
    test_server_crash,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1,targetMaster=True,targetProcess=memcached
    test_server_crash,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1,,targetProcess=memcached
    test_server_crash,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=index:1,,targetProcess=memcached
    test_server_crash,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:1-index:1,,targetProcess=memcached
    test_server_crash,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:2,targetProcess=memcached
# test with server crash by killing indexer
    test_server_crash,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=index:1,targetProcess=indexer
    test_server_crash,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=index:2,targetProcess=indexer
    test_server_crash,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=3,nodes_out_dist=index:3,targetProcess=indexer
# test with server crash by killing indexer
    test_server_crash,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1,targetMaster=True,targetProcess=projector
    test_server_crash,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1,,targetProcess=projector
    test_server_crash,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=index:1,,targetProcess=projector
    test_server_crash,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:1-index:1,,targetProcess=projector
    test_server_crash,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:2,targetProcess=projector
# test with server restart
    test_server_restart,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1,targetMaster=True
    test_server_restart,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1
    test_server_restart,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=index:1
    test_server_restart,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:1-index:1
    test_server_restart,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:2
    test_server_restart,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=n1ql:1
# test with hard failover
    test_failover,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=kv-kv:n1ql-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1,targetMaster
    test_failover,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1
    test_failover,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=index:1
    test_failover,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:1-index:1
    test_failover,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:2
    test_failover,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=n1ql:1
# test with graceful failover
    test_failover,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1,graceful=True,targetMaster=True
    test_failover,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1,graceful=True
    test_failover,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=index:1,graceful=True
    test_failover,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:1-index:1,graceful=True
    test_failover,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:2,graceful=True
    test_failover,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=n1ql:1,graceful=True
# test with failover and add-back recovery
    test_failover_add_back,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv:n1ql-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1,graceful=True,targetMaster=True
    test_failover_add_back,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=index:1,graceful=True
    test_failover_add_back,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:1-index:1,graceful=True
    test_failover_add_back,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:2,graceful=True
    test_failover_add_back,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=n1ql:1,graceful=True
    test_failover_add_back,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=kv:1,graceful=True
    test_failover_add_back,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=index:1,graceful=True
    test_failover_add_back,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:1-index:1,graceful=True
    test_failover_add_back,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=2,nodes_out_dist=kv:2,graceful=True
    test_failover_add_back,before=create_index,in_between=drop_index,after=,groups=simple,dataset=default,docs-per-day=10,services_init=n1ql:kv-kv-index-kv:index,nodes_init=6,nodes_out=1,nodes_out_dist=n1ql:1,graceful=True