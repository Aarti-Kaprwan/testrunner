2i.recovery_2i.SecondaryIndexingRecoveryTests:
#Reovery with the following before=create_index,in_between=query_ops,after=query_ops:drop_index
# test with warm up
    test_warmup,nodes_init=5,nodes_in=1,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:index:index:n1ql,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
# test with autofailover
    test_autofailover,nodes_init=5,nodes_in=1,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:index:index:n1ql,nodes_out_dist=kv,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_autofailover,nodes_init=5,nodes_in=1,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:index:index:n1ql,nodes_out_dist=index,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
# test with rebalance-in
    test_rebalance_in,nodes_init=5,nodes_in=1,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:index:index:n1ql,services_in=index,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_rebalance_in,nodes_init=5,nodes_in=2,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:index:index:n1ql,services_in=index,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_rebalance_in,nodes_init=5,nodes_in=1,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:index:index:n1ql,services_in=kv,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_rebalance_in,nodes_init=5,nodes_in=2,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:index:index:n1ql,services_in=kv,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_rebalance_in,nodes_init=5,nodes_in=2,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:index:index:n1ql,services_in=kv:index,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
# test with rebalance-out
    test_rebalance_out,nodes_init=7,nodes_out=1,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:kv:index:index:index:n1ql,nodes_out_dist=index:1,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_rebalance_out,nodes_init=7,nodes_out=1,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:kv:index:index:index:n1ql,nodes_out_dist=kv:1,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_rebalance_out,nodes_init=7,nodes_out=1,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:kv:index:index:index:n1ql,nodes_out_dist=index:2,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_rebalance_out,nodes_init=8,nodes_out=1,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:kv:index:index:index:index:n1ql,nodes_out_dist=kv:2,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_rebalance_out,nodes_init=8,nodes_out=2,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:kv:index:index:index:index:n1ql,nodes_out_dist=kv:1-index:1,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
# test with rebalance-in-out
    test_rebalance_in_out,nodes_init=7,nodes_out=2,nodes_in=2,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:kv:index:index:index:n1ql,services_in:index:kv,nodes_out_dist=kv:1-index:1,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_rebalance_in_out,nodes_init=7,nodes_out=2,nodes_in=2,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:kv:index:index:index:n1ql,services_in:kv,nodes_out_dist=kv:2,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_rebalance_in_out,nodes_init=7,nodes_out=2,nodes_in=2,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:kv:index:index:index:n1ql,services_in:index,nodes_out_dist=index:2,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_rebalance_in_out,nodes_init=7,nodes_out=2,nodes_in=1,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:kv:index:index:index:n1ql,services_in:index,nodes_out_dist=index:kv,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
# test with server crash by killing memcached
    test_server_crash,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:index:1,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_server_crash,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:index:2,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_server_crash,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:1,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_server_crash,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:2,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_server_crash,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:1-index:1,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
# test with server restart
    test_server_restart,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:index:1,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_server_restart,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:index:2,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_server_restart,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:1,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_server_restart,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:2,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_server_restart,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:1-index:1,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
# test with hard failover
    test_failover,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:index:1,graceful=False,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:index:2,graceful=False,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:1,graceful=False,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:2,graceful=False,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:1-index:1,graceful=False,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
# test with graceful failover
    test_failover,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:index:1,graceful=True,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:index:2,graceful=True,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:1,graceful=True,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:2,graceful=True,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:1-index:1,graceful=True,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover,nodes_init=5,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:index:index:n1ql,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
# test with failover and add-back recovery
    test_failover_add_back,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:index:1,graceful=True,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover_add_back,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:index:2,graceful=True,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover_add_back,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:1,graceful=True,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover_add_back,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:2,graceful=True,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover_add_back,nodes_init=7,before=create_index,in_between=query_ops,after=query_ops:drop_index,services_init=kv:kv:kv,index:index,index:n1ql,nodes_out_dist:kv:1-index:1,graceful=True,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
    test_failover_add_back,nodes_init=5,before=create_index,in_between=query_ops,after=query_ops:drop_index,groups=composite,dataset=default,docs-per-day=10000,services_init=kv:kv:index:index:n1ql,standard_buckets=2,sasl_buckets=2,standard_bucket_priority=low:high,sasl_bucket_priority=low:high
